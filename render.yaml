# Render blueprint for TrackMyMoney
# Note: Replace placeholder values (env var values, repo) in Render after importing.

services:
  - type: web
    name: trackmymoney-backend
    repo: Rajeshpenupothu/trackmymoney
    branch: main
    root: backend
    plan: free
    env: docker
    dockerfilePath: ./backend/Dockerfile
    buildCommand: ""
    startCommand: ""
    envVars:
      - key: SPRING_DATASOURCE_URL
        value: jdbc:postgresql://ep-restless-snow-a16c6aoh-pooler.ap-southeast-1.aws.neon.tech:5432/neondb?sslmode=require&channel_binding=require
      - key: SPRING_DATASOURCE_USERNAME
        value: neondb_owner
      - key: SPRING_DATASOURCE_PASSWORD
        sync: false

static_sites:
  - name: trackmymoney-frontend
    repo: Rajeshpenupothu/trackmymoney
    branch: main
    root: frontend
    buildCommand: npm run build
    publishPath: frontend/dist
    envVars:
      - key: VITE_API_BASE_URL
        value: "${VITE_API_BASE_URL}"

  - type: cron
    name: backend-pinger
    schedule: "*/14 * * * *"
    command: curl -sf http://trackmymoney-backend:8080/

# Optional: add disks, cron jobs, or services for other parts of the app here.
